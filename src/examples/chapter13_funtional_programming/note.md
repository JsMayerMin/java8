# 함수형 관점으로 생각하기

* 왜 함수형 프로그램을 사용하는가?
* 함수형 프로그래밍은 어떻게 정의하는가?
* 선언형 프로그래밍과 참조 투명성
* 함수형 스타일의 자바 구현 가이드라인
* 반복과 재귀

####왜 함수형 프로그래밍을 사용하는가? 선언형 프로그그래밍이란

- 함수형, 부작용, 불변성, 선언형 프로그래밍, 참조 투명성, 자바 8에서의 기능
- 함수형 프로그래밍이 제공하는 no side effects, immutablility라는 개념이 이 문제를 해결하는데 어떤 도움을 주는지 알아보자
- 부작용 없는 시스템이 가능할까? 부작용이 존재하는 프로그램은 공유된 가변 데이터와 같이 데이터가 어디서 어떻게 변동되는지 파악하기 힘들때 발생할 수 있다.
부작용 없는 시스템의 개념은 함수형 프로그래밍에서 유래되었다.
- 어떻게에 집중하는 프로그래밍 형식은 고전의 객체지향 프로그램에서 이용하는 방식이며 이를 명령형 프로그래밍이라고도 부른다.
    선언형 프로그래밍이라고도 하며, 우리가 원하는것이 무엇이고 시스템이 어떻게 그 목표를 달성할 것인지 등의 규칙을 정한다.
```Java
    Transaction mostExpensive = transactions.get(0);
    if(mostExpensive == null)
        throw new IllegalArgumentException("Empy list of transactions");
    
    for(Transaction t : transactions.subList(1, transactions.size())) {
        if(t.getValue() > mostExpensive.getValue())
            //
    }
    
    
```
- 어떻게 가 아닌 무엇을 에 집중하는 방식도 있다. 
```Java
    Optional<Transaction> mostExpensive = transactions.stream().max(comparing(Transaction::getValue));
```

- 함수형 프로그래밍은 선언형 프로그래밍을 따르는 대표적인 방식이며 부작용 없는 계산을 지향한다. 

#### 함수형 프로그래밍은 어떻게 정의하는가?

- 함수의 의미에 대해서 생각해봐야 한다. 함수는 부작용이 없어야하며 다른객체의 필드를 고치면서 동시에 또 다른 객체의 필드를
고치는 등의 행동을 해서는 안된다.
- 자바와 같은 언어에서는 바로 수학적인 함수냐 아니냐가 method, function을 구분하는 핵심이다.
- **함수형**이라는 말은 '수학의 함수처럼 부작용이 없는'을 의미한다.
- 순수 함수형 프로그래밍 : 함수 그리고 if-then-else 등의 수학적 표현만 사용
- 함수형 프로그래밍 : 시스템의 다른 부분에 영향을 미치지 않는다면 내부적으로는 함수형이 아닌 기능도 사용

1. 자바에서는 함수형 프로그래밍을 구현한다.

- 자바로는 완벽한 순수 함수형을 프로그래밍하기 어렵고 부작용이 없도록 함수형 프로그래밍 목적에 맞게 함수를 구성한다.

2. 함수나 메서드는 지역 변수만을 변경해야 함수형이다.

- 함수나 메서드에서 참조하는 객체가 있다면 그 객체는 불변이여야한다.
- 새로 생성한 객체의 필드 갱신은 외부에 노출되어서는 안된다.

3. 함수나 메서드가 어떤 예외도 일으키지 않아야한다.

- Optional객체를 고려할 수 있으며, 함수형 프로그래밍과 순수 함수형 그래밍의 장단점을 실용적으로 고려해야한다.

4. 함수형에서는 비함수형 동작을 감출 수 있는 상황에서만 부작용을 포함하는 라이브러리 함수를 사용해야 한다.

```Java
//marker annotation
//http://docs.oracle.com/javase/7/docs/technotes/guides/language/annotations.html
```

### 참조 투명성

- 부작용을 감춰야한다라는 제약은 참조 투명성(*referential transparency*) 개념으로 귀결된다. 
- 같은 함수를 호출 했을때 항상 같은 결과를 반환한다면 참조적으로 투명한 함수이다.


